{% extends 'base.html' %}

{% block title %}Investment Options Calculator - Finance Tools{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12 col-lg-10 col-xl-8 mx-auto">
        <h2 class="text-center mb-4">Investment Options Calculator</h2>
        <p class="text-center text-muted mb-4">Compare different investment strategies and see how your money can grow</p>

        <div class="card border-primary shadow-sm">
            <div class="card-body bg-light">
                <h5 class="card-title text-primary mb-3">Investment Details</h5>
                <form id="investmentOptionsForm">
                    <div class="row">
                        <div class="col-12 col-md-4">
                            <div class="mb-3">
                                <label for="investmentAmount" class="form-label fw-bold">Investment Amount ($)</label>
                                <input type="number" id="investmentAmount" class="form-control form-control-lg"
                                       value="250" step="10" placeholder="e.g., 250">
                            </div>
                        </div>
                        <div class="col-12 col-md-4">
                            <div class="mb-3">
                                <label for="investmentFrequency" class="form-label fw-bold">How Often?</label>
                                <select id="investmentFrequency" class="form-select form-select-lg">
                                    <option value="weekly">Weekly</option>
                                    <option value="monthly" selected>Monthly</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-12 col-md-4">
                            <div class="mb-3">
                                <label for="investmentYears" class="form-label fw-bold">For How Long? (years)</label>
                                <input type="number" id="investmentYears" class="form-control form-control-lg"
                                       value="10" step="1" min="1" placeholder="e.g., 10">
                            </div>
                        </div>
                    </div>

                    <hr class="my-4">

                    <h5 class="card-title text-primary mb-3">Investment Parameters</h5>
                    <div class="row">
                        <div class="col-12 col-md-3">
                            <div class="mb-3">
                                <label for="savingsRate" class="form-label fw-bold">Savings Rate (%)</label>
                                <input type="number" id="savingsRate" class="form-control"
                                       value="4.0" step="0.1" min="0" max="20" placeholder="e.g., 4.0">
                                <small class="text-muted">Typical high-interest savings</small>
                            </div>
                        </div>
                        <div class="col-12 col-md-3">
                            <div class="mb-3">
                                <label for="etfRate" class="form-label fw-bold">ETF Return (%)</label>
                                <input type="number" id="etfRate" class="form-control"
                                       value="7.0" step="0.1" min="0" max="20" placeholder="e.g., 7.0">
                                <small class="text-muted">Historical average</small>
                            </div>
                        </div>
                        <div class="col-12 col-md-3">
                            <div class="mb-3">
                                <label for="superRate" class="form-label fw-bold">Super Return (%)</label>
                                <input type="number" id="superRate" class="form-control"
                                       value="8.0" step="0.1" min="0" max="20" placeholder="e.g., 8.0">
                                <small class="text-muted">With tax benefits</small>
                            </div>
                        </div>
                        <div class="col-12 col-md-3">
                            <div class="mb-3">
                                <label for="marginalTaxRate" class="form-label fw-bold">Tax Rate (%)</label>
                                <input type="number" id="marginalTaxRate" class="form-control"
                                       value="32.5" step="0.5" min="0" max="100" placeholder="e.g., 32.5">
                                <small class="text-muted">Your marginal tax rate</small>
                            </div>
                        </div>
                    </div>

                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-success btn-lg">
                            <i class="bi bi-graph-up-arrow"></i> Compare Investment Options
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Results Container -->
        <div class="results-section" id="results" style="display: none;">
            <div class="card mt-4">
                <div class="card-body">
                    <h5 class="card-title">Investment Comparison</h5>
                    <p class="text-muted" id="summaryText"></p>

                    <div class="table-responsive">
                        <table class="table table-striped table-hover" id="comparisonTable">
                            <thead class="table-success">
                                <tr>
                                    <th>Investment Type</th>
                                    <th>Return Rate</th>
                                    <th class="text-end">Investment Returns</th>
                                    <th class="text-end">Tax Paid</th>
                                    <th class="text-end">Final Value (After Tax)</th>
                                    <th class="text-end">Difference vs Mattress</th>
                                </tr>
                            </thead>
                            <tbody id="comparisonBody">
                            </tbody>
                        </table>
                    </div>

                    <div class="mt-4">
                        <h6 class="text-center mb-3">Final Value Comparison</h6>
                        <div style="height: 350px;">
                            <canvas id="comparisonBarChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col-md-6">
                    <div class="card border-info">
                        <div class="card-body text-center">
                            <h6 class="card-title">Best Option</h6>
                            <h3 class="text-success" id="bestOption">-</h3>
                            <p class="text-muted mb-0" id="bestValue">-</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card border-warning">
                        <div class="card-body text-center">
                            <h6 class="card-title">Maximum Gain</h6>
                            <h3 class="text-primary" id="maxGain">-</h3>
                            <p class="text-muted mb-0">Compared to keeping under mattress</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-body">
                    <h5 class="card-title">All Investment Options Compared</h5>
                    <div style="height: 400px;">
                        <canvas id="summaryChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="row mt-4" id="individualChartsContainer">
            </div>

            <div class="alert alert-info mt-4">
                <h6><i class="bi bi-info-circle"></i> Understanding the Options</h6>
                <ul class="mb-0">
                    <li><strong>Under a Mattress:</strong> No returns, no growth - just your savings sitting idle</li>
                    <li><strong>Savings Account:</strong> Low-risk, government-guaranteed up to $250k, easy access to funds. Interest is taxed at your marginal tax rate.</li>
                    <li><strong>ETFs (Exchange-Traded Funds):</strong> Diversified market exposure, moderate risk, liquid investment. Capital gains benefit from 50% CGT discount if held >12 months.</li>
                    <li><strong>Superannuation:</strong> Tax-advantaged long-term growth with earnings taxed at just 15%. <strong>Important restrictions:</strong> Annual contribution caps apply (currently $30k concessional, $120k non-concessional), and funds are generally locked until preservation age (typically 60).</li>
                </ul>
            </div>

            <div class="alert alert-warning mt-3">
                <h6><i class="bi bi-exclamation-triangle"></i> Disclaimer - Not Financial Advice</h6>
                <p class="mb-0">
                    <strong>This calculator is for educational purposes only and does not constitute financial advice.</strong>
                    These calculations are estimates based on historical averages and assumptions.
                    Actual investment returns vary significantly and past performance does not guarantee future results.
                    Investment involves risk, including the potential loss of principal.
                    Please consult a licensed financial advisor for personalized advice tailored to your individual circumstances.
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="/static/js/calculators/investmentoptions.js"></script>
{% endblock %}
